
{% extends 'home.html' %}

{% block content %}
<div class="container-fluid mx-0" style="padding-left: 0;">
    <div class="row">
        <div class="col-md-9">
            <h2>Test Type</h2>
            <div class="form-check">
                <input class="form-check-input" type="radio" id="radio1" name="radioGroup" value="option1">
                <label class="form-check-label" for="radio1">Timed</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" id="radio2" name="radioGroup" value="option2">
                <label class="form-check-label" for="radio2">Tutored</label>
            </div>
        </div>

        <div class="col-md-6">
            <h2>Subjects</h2>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject1" name="subject1" value="subject1">
                <label class="form-check-label" for="subject1">Anatomy</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject3" name="subject3" value="subject1">
                <label class="form-check-label" for="subject3">Bio Mechanics</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject4" name="subject4" value="subject2">
                <label class="form-check-label" for="subject4">Lymphatics</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject5" name="subject5" value="subject1">
                <label class="form-check-label" for="subject5">H.E.E.N.T</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject6" name="subject6" value="subject2">
                <label class="form-check-label" for="subject6">Cardiopulmonary</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject7" name="subject7" value="subject1">
                <label class="form-check-label" for="subject7">Gastrointestrinal</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject8" name="subject8" value="subject2">
                <label class="form-check-label" for="subject8">Pregnancy</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject9" name="subject9" value="subject2">
                <label class="form-check-label" for="subject9">Pediatrics</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="subject10" name="subject10" value="subject2">
                <label class="form-check-label" for="subject10">Orthopedics/Gait</label>
            </div>
            <button class="btn btn-primary mt-3" id="selectAllBtn">Select All</button>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-md-7">
            <h2>Number of Questions (Max allowed is 40)</h2>
            <input type="number" class="form-control mb-3" id="numberInput" name="numberInput" min="0" max="40">
        </div>

        <div class="col-md-7">
            <button type="submit" class="btn btn-primary btn-lg" id="takeTestBtn" disabled>Take Test</button>
        </div>
    </div>
</div>

<style>
    /* Add your custom CSS styles here */
    .container-fluid {
        position: relative;
        width: 100vw;
        height: 100vh;
        padding: 30px
    }
</style>

<script>
    let selectAllState = false;

    // Function to toggle checkbox states
    function toggleCheckboxes() {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]');
        checkboxes.forEach(function (checkbox) {
            checkbox.checked = !selectAllState;
        });
        selectAllState = !selectAllState;
    }

    // Function to check if all conditions are met and enable the "Take Test" button
    function checkConditions() {
        const radioButtons = document.querySelectorAll('.form-check-input[type="radio"]');
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]');
        const numberInput = document.getElementById('numberInput');
        const takeTestBtn = document.getElementById('takeTestBtn');

        const isRadioButtonSelected = Array.from(radioButtons).some(rb => rb.checked);
        const isAtLeastOneCheckboxSelected = Array.from(checkboxes).some(checkbox => checkbox.checked);
        const isNumberInputValid = parseInt(numberInput.value) > 0 && parseInt(numberInput.value) <= 40;

        if (isRadioButtonSelected && isAtLeastOneCheckboxSelected && isNumberInputValid) {
            takeTestBtn.disabled = false;
        } else {
            takeTestBtn.disabled = true;
        }
    }

    document.getElementById('selectAllBtn').addEventListener('click', toggleCheckboxes);
    document.getElementById('takeTestBtn').addEventListener('click', function () {
        const radioButtons = document.querySelectorAll('.form-check-input[type="radio"]');
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]');
        const numberInput = document.getElementById('numberInput');
        const isRadioButtonSelected = Array.from(radioButtons).some(rb => rb.checked);
        const isAtLeastOneCheckboxSelected = Array.from(checkboxes).some(checkbox => checkbox.checked);
        const isNumberInputValid = parseInt(numberInput.value) > 0 && parseInt(numberInput.value) <= 40;

        if (isRadioButtonSelected && isAtLeastOneCheckboxSelected && isNumberInputValid) {
            // Redirect to the test.html page when the button is clicked
            window.location.href='/testTemp';
        } else {
            // Show an alert if the conditions are not met
            alert("Please have all test selections selected first.");
        }
    });

    // Listen for changes in user selections
    const formElements = document.querySelectorAll('input[type="radio"], input[type="checkbox"], input[type="number"]');
    formElements.forEach(function (element) {
        element.addEventListener('change', checkConditions);
    });
</script>
{% endblock %}

